# 宠物AI形象生成及周边定制SaaS - 产品需求文档

## 产品开发状态说明

**⚠️ 当前状态：概念阶段**

- 本文档描述的是目标产品愿景
- 现有代码库为通用SaaS启动模板（ullrai-starter）
- 需要基于现有技术栈进行宠物AI功能开发

**技术基础架构（已实现）：**

- Next.js 15 + App Router
- PostgreSQL + Drizzle ORM
- Better-Auth 身份验证
- Creem 支付集成
- Cloudflare R2 文件存储
- Tailwind CSS v4 + shadcn/ui

## 1. 产品概述

### 1.1 产品定位

一站式宠物数字形象创作与周边定制平台，通过AI技术将用户的宠物照片转化为各种艺术风格的数字形象，并支持将这些形象定制成实体商品。

### 1.2 核心价值

- **情感价值**：将宠物形象艺术化，创造独特纪念品
- **便捷性**：一站式完成从创作到商品定制的全流程
- **个性化**：多样化风格选择，满足不同审美需求

## 2. 功能架构

```
宠物AI SaaS
├── 用户系统
│   ├── 注册/登录
│   ├── 个人中心
│   └── 账户设置
├── AI创作中心
│   ├── 图片上传
│   ├── 风格选择
│   ├── AI生成
│   └── 作品管理
├── 商品定制
│   ├── 商品选择
│   ├── 定制编辑器
│   ├── 效果预览
│   └── 购物车
├── 订单系统
│   ├── 订单创建
│   ├── 支付
│   ├── 订单管理
│   └── 物流追踪
└── 探索发现
    ├── 风格展示
    ├── 商品展示
    └── 灵感画廊
```

## 3. 详细功能需求

### 3.1 用户系统

#### 3.1.1 注册/登录（✅ 已实现）

- **注册方式**：
  - 邮箱 + Magic Link（使用 Better-Auth + Resend）
  - 第三方登录（Google、LinkedIn - 已配置）

#### 3.1.2 个人中心（🔄 部分实现）

- **基础设置**：账户信息、外观主题、通知设置（✅ 已实现）
- **计费管理**：订阅状态、支付历史（✅ 已实现）
- **我的作品**：展示所有AI生成的作品，支持筛选、排序（❌ 待开发）
- **我的订单**：订单列表及状态追踪（❌ 待开发）
- **收藏夹**：收藏的风格和商品（❌ 待开发）
- **地址管理**：收货地址的增删改查（❌ 待开发）

### 3.2 AI创作中心（❌ 待开发）

#### 3.2.1 创作流程

```
上传照片 → 选择风格 → 确认生成 → 等待处理 → 查看结果 → 保存/重新生成
```

#### 3.2.2 图片上传（🔄 基础功能已实现）

**现有技术基础：**

- Cloudflare R2 存储集成（✅ 已实现）
- 预签名URL上传（✅ 已实现）
- 文件验证和大小限制（✅ 已实现）
- 图片压缩功能（✅ 已实现）

**宠物AI特定需求：**

- **支持格式**：JPG、PNG、WEBP
- **文件大小**：最大20MB
- **推荐要求**：
  - 宠物萌照或搞怪照片
  - 主人与宠物合照
- **上传数量**：1张

#### 3.2.3 风格选择

可后台管理

- **风格类别**：
  - 经典艺术：油画、水彩、素描、版画
  - 现代风格：卡通、动漫、波普艺术、极简主义
  - 特色风格：赛博朋克、像素艺术、梵高风格、宫崎骏风格
  - 季节限定：圣诞风、万圣节风等
- **展示方式**：
  - 风格预览图（使用示例宠物）
  - 风格描述
  - 热度标签

#### 3.2.4 生成配置

- **生成数量**：默认2张，可选1-4张
- **生成模式**：
  - 快速生成（优先速度）
  - 高质量生成（优先效果）
- **费用计算**：生成成功实时扣减

#### 3.2.5 生成过程

- **等待界面**：
  - 进度条显示（分阶段：上传中、处理中、生成中）
  - 预计剩余时间
  - 有趣的等待动画（宠物相关）
  - 随机展示宠物小知识
- **超时处理**：
  - 超过60秒提示"正在精心创作中"
  - 超过120秒提供取消选项

#### 3.2.6 结果展示

- **展示方式**：
  - 大图预览
  - 缩略图切换
  - 原图对比开关
- **操作选项**：
  - 下载高清图（水印/无水印）
  - 保存到作品集
  - 直接定制商品
  - 重新生成
  - 分享功能

### 3.3 商品定制

#### 3.3.1 商品品类

可后台管理

- **服饰类**：T恤、卫衣、帽子
- **生活用品**：马克杯、抱枕、毛毯
- **数码周边**：手机壳、鼠标垫、笔记本贴
- **装饰品**：相框画、帆布包、钥匙扣
- **文具类**：笔记本、明信片、贴纸

#### 3.3.2 定制流程

```
选择商品 → 选择/上传图案 → 调整位置大小 → 添加文字(可选) → 预览确认 → 加入购物车
```

#### 3.3.3 定制编辑器

使用供应商提供版本，嵌入

- **图案操作**：
  - 位置拖拽
  - 大小缩放
  - 旋转角度
  - 图案居中/对齐辅助线
- **文字功能**（评估后建议支持）：
  - 添加宠物名字
  - 预设文字模板（如"My Best Friend"）
  - 字体选择（5-8种）
  - 颜色选择
- **商品配置**：
  - 尺码选择（服饰类）
  - 颜色选择
  - 材质选择（如有）

#### 3.3.4 预览功能

- **多角度预览**：正面、背面、侧面（如适用）
- **场景预览**：展示实际使用场景
- **细节放大**：查看印刷细节

### 3.4 订单系统（🔄 基础支付功能已实现）

**现有技术基础：**

- Creem 支付集成（✅ 已实现）
- 订阅和支付记录表（✅ 已实现）
- Webhook 事件处理（✅ 已实现）

#### 3.4.1 购物车（❌ 待开发）

- **功能特性**：
  - 商品数量调整
  - 批量删除
  - 价格实时计算
  - 优惠码输入
  - 运费计算

#### 3.4.2 结算流程（🔄 基础功能已实现）

- **信息确认**：
  - 收货地址（❌ 待开发）
  - 商品清单（❌ 待开发）
  - 价格明细（❌ 待开发）
- **支付方式**：
  - Creem（✅ 已实现）

#### 3.4.3 订单管理（❌ 待开发）

**需要扩展数据库表结构：**

- 实体商品订单表
- 订单商品详情表
- 物流信息表

- **订单状态**：
  - 待支付 → 制作中 → 已发货 → 已完成
- **订单详情**：
  - 商品信息
  - 物流信息
  - 发票下载

### 3.5 探索发现

#### 3.5.1 风格展厅

- **展示内容**：
  - 各风格效果示例
  - 风格介绍
  - 用户作品展示（需授权）
- **互动功能**：
  - 收藏风格
  - 查看使用量排行

#### 3.5.2 商品目录

- **展示方式**：
  - 商品分类浏览
  - 商品详情页
  - 定制示例展示
  - 价格区间筛选

## 4. 商业模式设计

### 4.1 收费策略（基于现有Creem集成）

**现有技术基础：**

- 多产品定价体系（✅ 已实现）
- 一次性、月付、年付支持（✅ 已实现）
- 需要调整为宠物AI产品定价

可以先按方案 2 实现？成本 cover 不住再切换方案 1

#### 方案一：混合收费模式（推荐）

- **基础使用**：
  - 注册赠送3次免费生成机会
  - 每月1次免费生成额度
- **AI生成收费**：
  - 单次购买：$0.99/次（生成2张）
  - 套餐包：
    - 10次：$7.99（省20%）
    - 30次：$19.99（省33%）
    - 月度会员：$9.99/月（30次额度）
- **商品定制**：按实际商品成本+合理利润定价

#### 方案二：商品驱动模式

- **AI生成**：完全免费（每日限制5次）
- **盈利来源**：商品销售利润
- **会员权益**：$4.99/月
  - 无限生成次数
  - 商品9折优惠
  - 专属风格

### 4.2 定价参考

- T恤：$19.99 - $24.99
- 马克杯：$12.99 - $15.99
- 手机壳：$14.99 - $19.99
- 相框画：$29.99 - $49.99

## 5. 页面组织结构

### 5.1 信息架构

```
首页
├── Hero区：核心价值展示
├── 功能介绍：3步完成定制
├── 风格展示：热门风格轮播
├── 商品展示：热销商品
└── 用户评价：社交证明

创作工坊（需登录）
├── 新建作品
├── 我的作品
├── 创作历史
└── 风格收藏

商品中心
├── 全部商品
├── 分类浏览
├── 定制编辑器
└── 设计灵感

个人中心
├── 账户信息
├── 作品管理
├── 订单管理
├── 地址管理
└── 账户余额
```

### 5.2 核心页面流程图

#### 5.2.1 主要用户流程

```
首页 → 立即体验 → 上传照片 → 选择风格 → AI生成 → 查看结果
                                               ↓
                                          选择商品
                                               ↓
                                          定制编辑
                                               ↓
                                          加入购物车
                                               ↓
                                          结算支付
                                               ↓
                                          订单完成
```

#### 5.2.2 作品管理流程

```
个人中心 → 我的作品 → 作品列表（网格/列表视图）
                     ↓
                选择作品
                     ↓
         ┌──────────┼──────────┐
         ↓          ↓          ↓
     查看详情   定制商品    删除作品
         ↓          ↓
     下载/分享   进入定制流程
```

## 6. 用户体验优化要点

### 6.1 降低用户门槛

- **免注册体验**：允许用户先体验AI生成，结果保存时才要求注册
- **智能引导**：首次使用时的新手引导
- **示例体验**：提供示例宠物照片快速体验

### 6.2 提升等待体验

- **分步反馈**：明确展示当前处理阶段
- **趣味互动**：等待时展示宠物趣味知识、其他用户作品
- **预期管理**：诚实告知可能的等待时间

### 6.3 创作体验优化

- **批量操作**：支持多张图片同时生成不同风格
- **历史记录**：保存用户的风格偏好
- **快速重试**：一键使用相同配置重新生成

### 6.4 定制体验优化

- **实时预览**：所见即所得的编辑体验
- **智能推荐**：基于图片风格推荐合适商品
- **保存草稿**：定制方案自动保存
